{% extends 'base.html.twig' %}
{% block stylesheets %}
    <link href="{{ asset('build/css/proposalStyles_css.css') }}" rel="stylesheet">

    <style>

        .proposal-slider .item img {
            opacity: 0.3;
            height: 68px;
            width: 100%;
            border-radius: 0px;
        }

        .proposal-slider .item.active img {
            opacity: 1;
            border: 0.5px solid #ccc;
        }


        .slide-left img,
        .slide-right img {
            margin-top: 19px;
        }

        .slide-left,
        .slide-right {
            background-color: #fff;
            position: absolute;
            z-index: 4;
            top: 50%;
            width: 50px;
            height: 50px;
            right: 20px;
            margin-top: -24px;
            text-align: center;
            opacity: 1;
            -webkit-box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .15);
            border-radius: 31px;
        }

        .slide-left:hover,
        .slide-right:hover {
            opacity: 1;
        }
        .carousel-item{
            max-height: 490px;
        }
        .slide-right {
            left: 20px;
        }

    </style>
{% endblock %}
{% block title %}Lenil | {{ proposal.title }}{% endblock %}

{% block body %}
    <div class="mp-gig-top-nav" style="position: sticky; z-index: 10; top: 0px;">
        <nav>
            <ul class="container text-center" id="mainNav">
                <li class="selected">
                    <a href="#introduction" class="gig-page-nav-link">Introduction</a>
                </li>
                <li class="">
                    <a href="#details" class="gig-page-nav-link">Détails du service</a>
                </li>
                <li>
                    <a href="#reviews" class="gig-page-nav-link">Commentaires</a>
                </li>
                <li>
                    <a href="#related" class="gig-page-nav-link">Note du service</a>
                </li>
                <li>
                    <a href="#redirect" onclick="window.location.href='../../conversations/message.php?seller_id=450'"
                       class="gig-page-nav-link"> <i class="fa fa-comments-o fa-lg" aria-hidden="true"></i> Contactez le
                        vendeur </a>
                </li>
                <li class="btns float-right d-none">
                    <button class="order-now btn btn-secondary"><span class="total-price">{{ proposal.price }}</span>€</button>
                </li>
            </ul>
        </nav>
    </div>

    <div class="container mt-5" id="introduction"> <!-- Container starts -->

        <div class="row">
            <div class="col-lg-8 col-md-7 mb-3"><!--- col-lg-8 col-md-7 mb-3 Starts --->
                <div class="card rounded-0 mb-5 border-0">
                    <div class="card-body details pt-0">
                        <div class="proposal-info ">
                            <h3>{{ proposal.title }}</h3>
                            <hr>
                            <nav class="breadcrumbs h-text-truncate mb-2">
                                <a href="{{ path('homepage') }}">Accueil</a>
                                <a href="{{ path('category_services',{categorySlug: proposal.category.slug, subcategorySlug: 'services'}) }}">{{ proposal.category.title }}</a>
                                <a href="{{ path('category_services',{categorySlug: proposal.category.slug, subcategorySlug: proposal.subcategory.slug}) }}">{{ proposal.subcategory.title }}</a>
                            </nav>
                            <img class="mb-1" src="/build/images/user_rate_blank.png">
                            <img class="mb-1" src="/build/images/user_rate_blank.png">
                            <img class="mb-1" src="/build/images/user_rate_blank.png">
                            <img class="mb-1" src="/build/images/user_rate_blank.png">
                            <img class="mb-1" src="/build/images/user_rate_blank.png">

                            <span class="text-muted span"> (0) &nbsp;0 Commande(s) Dans la file d'attente.</span>

                            <div class="sharethis-inline-share-buttons  st-right  st-inline-share-buttons st-animated"
                                 style="margin-top: -36px;" id="st-1">
                                <div class="st-btn st-first" data-network="whatsapp" style="display: inline-block;">
                                    <img alt="whatsapp sharing button"
                                         src="https://platform-cdn.sharethis.com/img/whatsapp.svg">
                                </div>
                                <div class="st-btn" data-network="facebook" style="display: inline-block;">
                                    <img alt="facebook sharing button"
                                         src="https://platform-cdn.sharethis.com/img/facebook.svg">
                                </div>
                                <div class="st-btn" data-network="twitter" style="display: inline-block;">
                                    <img alt="twitter sharing button"
                                         src="https://platform-cdn.sharethis.com/img/twitter.svg">

                                </div>
                                <div class="st-btn" data-network="linkedin" style="display: inline-block;">
                                    <img alt="linkedin sharing button"
                                         src="https://platform-cdn.sharethis.com/img/linkedin.svg">

                                </div>
                                <div class="st-btn" data-network="pinterest" style="display: inline-block;">
                                    <img alt="pinterest sharing button"
                                         src="https://platform-cdn.sharethis.com/img/pinterest.svg">

                                </div>
                                <div class="st-btn st-last" data-network="sharethis" style="display: inline-block;">
                                    <img alt="sharethis sharing button"
                                         src="https://platform-cdn.sharethis.com/img/sharethis.svg">

                                </div>
                            </div>
                        </div>
                        <div id="myCarousel" class="carousel slide">
                            <ol class="carousel-indicators">
                                {% for image in proposal.proposalImages %}
                                    <li data-target="#myCarousel"
                                        data-slide-to="{{ loop.index }}" {% if loop.index == 1 %} class="active" {% endif %}></li>
                                {% endfor %}
                            </ol>
                            <div class="carousel-inner">
                                {% for image in proposal.proposalImages %}
                                    <div class="carousel-item {% if loop.index == 1 %} active {% endif %}">
                                        <img class="d-block w-100" src="/uploads/images/{{ image.fileName }}">
                                        <div data-action="img-{{ loop.index }}" class="slide-fullscreen"
                                             style="opacity: 0;">Full Screen
                                        </div>
                                    </div>
                                {% endfor %}

                            </div>
                            <a class="carousel-control-prev slide-nav slide-right" href="#myCarousel" data-slide="prev">
                                <!--<span class="carousel-control-prev-icon carousel-icon"></span>-->
                                <img src="/build/images/svg/next.svg" width="20" style="transform: scaleX(-1);">
                            </a>
                            <a class="carousel-control-next slide-nav slide-left" href="#myCarousel" data-slide="next">
                                <!--<span class="carousel-control-next-icon carousel-icon"></span>-->
                                <img src="/build/images/svg/next.svg" width="20">
                            </a>
                        </div>
                    </div>
                </div>

                <div class="card rounded-0 mb-5 " id="details">
                    <div class="card-header"><h4>A propos de ce service</h4></div>
                    <div class="card-body proposal-desc">
                        <p>{{ proposal.description | raw }}</p>
                    </div>
                </div>


                <div class="card proposal-reviews rounded-0 mb-5" id="reviews">
                    <div class="card-header">
                        <h4 class="mb-0 ">
                            <div class="float-left">
                                <span class="mr-2"> 0 Commentaire(s) </span>
                                <img class="mb-1" src="/build/images/user_rate_blank.png">
                                <img class="mb-1" src="/build/images/user_rate_blank.png">
                                <img class="mb-1" src="/build/images/user_rate_blank.png">
                                <img class="mb-1" src="/build/images/user_rate_blank.png">
                                <img class="mb-1" src="/build/images/user_rate_blank.png">
                                <span class="text-muted ml-2"> {{ proposal.rating }} </span>
                            </div>
                            <div class="float-right">
                                <button id="dropdown-button" class="btn btn-success dropdown-toggle"
                                        data-toggle="dropdown" aria-expanded="false"> Plus Récent
                                </button>
                                <ul class="dropdown-menu proposalDropdown"
                                    style="width: auto !important; position: absolute; transform: translate3d(603px, 0px, 0px); top: 0px; left: 0px; will-change: transform;"
                                    x-placement="top-start">
                                    <li class="dropdown-item active all">Plus Récent</li>
                                    <li class="dropdown-item  good">Commentaire Positif</li>
                                    <li class="dropdown-item  bad">Commentaire négatif</li>
                                </ul>
                            </div>
                        </h4>
                    </div>
                    <div class="card-body ">

                        <article id="all" class="proposal-reviews">
                            <ul class="reviews-list">
                                <li>
                                    <h3 class="" align="center">
                                        <i class="fa fa-frown-o"></i> Ce service n'a pas encore d'avis. Soyez le premier
                                        à poster un avis.
                                    </h3>
                                </li>
                            </ul><!-- reviews-list Ends -->
                        </article>
                        <article id="good" class="proposal-reviews" style="display: none;">
                            <!-- proposal-reviews Starts -->
                            <ul class="reviews-list"><!-- reviews-list Starts -->

                                <li>
                                    <h3 class="" align="center">
                                        Ce service n'a pas encore d'avis positif.
                                    </h3>
                                </li>
                            </ul><!-- reviews-list Ends -->
                        </article><!-- proposal-reviews Ends -->
                        <article id="bad" class="proposal-reviews" style="display: none;">
                            <!-- proposal-reviews Starts -->
                            <ul class="reviews-list"><!-- reviews-list Starts -->

                                <li>
                                    <h3 align="center ">
                                        <i class="fa fa-smile-o"></i> Ce service n'a pas encore d'avis négatifs.
                                    </h3>
                                </li>
                            </ul><!-- reviews-list Ends -->
                        </article><!-- proposal-reviews Ends -->      </div>
                </div>
                <div class="proposal-tags-container mt-2 "><!--- proposal-tags-container Starts --->
                    <div class="proposal-tag mb-3" style=""><a href="../../tags/harry"><span>harry</span></a></div>
                </div><!--- proposal-tags-container Ends --->

            </div>
            <div class="col-lg-4 col-md-5 proposal-sidebar"> <!-- Col starts -->
                <div class="card mb-5 rounded-0">
                    <div class="card-body order-box tab-content"><!--- card-body Starts --->
                        <div class="purchase-form">
                            <form action="../../checkout" id="checkoutForm" method="post">
                                <input type="hidden" name="proposal_id" value="629">
                                <input type="hidden" name="proposal_qty" value="1">
                                <div class="header">
                                    <span class="text ">
      <a href="#" class="secure ml-2"><svg xmlns="http://www.w3.org/2000/svg" height="512px" viewBox="-41 0 374 374.10622" width="512px" data-toggle="tooltip" data-html="true" title="" data-original-title="

<div class='card border-0'>

<div class='card-body p-2'>

<h5 class='font-weight-normal text-left'>Buyer payment protection</h5>

<hr class='mb-2 mt-2'>

<h6 class='font-weight-normal line-height-full text-left'>Les fonds sont retenus jusqu'à ce que le travail soit approuvé par l'acheteur ou remboursé
</h6>

</div></div>

"><path d="m287.664062 75.746094-140.605468-74.921875c-2.085938-1.113281-4.585938-1.097657-6.65625.039062l-136.714844 74.921875c-2.242188 1.230469-3.6328125 3.582032-3.6328125 6.140625v97.867188c.0820315 80.449219 47.7460935 153.230469 121.4570315 185.460937l18.976562 8.269532c1.773438.773437 3.792969.777343 5.570313.007812l21.382812-9.234375c75.078125-31.53125 123.921875-105.015625 123.929688-186.445313v-95.925781c0-2.585937-1.425782-4.964843-3.707032-6.179687zm-10.292968 102.105468c-.015625 75.816407-45.503906 144.226563-115.410156 173.566407l-.046876.023437-18.621093 8.039063-16.179688-7.058594c-68.613281-30-112.984375-97.742187-113.0625-172.628906v-93.722657l129.761719-71.117187 133.558594 71.167969zm0 0" fill="#a9a9a9"></path><path d="m92.167969 175.253906c-2.511719-2.941406-6.929688-3.289062-9.871094-.777344-2.941406 2.507813-3.289063 6.929688-.777344 9.867188l36.976563 43.300781c2.46875 2.890625 6.792968 3.285157 9.738281.886719l86.117187-70.0625c3-2.4375 3.453126-6.847656 1.011719-9.847656-2.4375-2.996094-6.847656-3.453125-9.847656-1.011719l-80.8125 65.742187zm0 0" fill="#a9a9a9"></path></svg>
</a>
            <a href="#" data-toggle="modal" data-target="#login-modal" class="favorite ml-2">
      <i class="fa fa-heart" data-toggle="tooltip" data-placement="top" title="" data-original-title="Favorites"></i>
      </a>
          </span>
                                    <div class="price ">
                                        <b class="currency"><span class="total-price">{{ proposal.price }} €</span> </b>
                                    </div>
                                </div>
                                <hr class="mt-0">
                                <div class="row">
                                    <div class="col-12 ml-2 p-2">
                                        <h6 class="mb-0 ">
                                            <i class="fa fa-clock-o"></i> {{ proposal.deliveryTime.name }}
                                            &nbsp;&nbsp;
                                            <span class="float-right mr-4">
          <i class="fa fa-refresh"></i>

          2 Revisions
        </span>
                                        </h6>
                                    </div>
                                </div>
                                <hr>
                                <a href="#" data-toggle="modal" data-target="#login-modal" class="btn btn-order">
                                    <strong>Commander maintenant (<span class="total-price">{{ proposal.price }} €</span>)</strong>
                                </a>
                            </form>
                        </div>
                    </div><!--- card-body Ends --->
                </div>

                <div class="card seller-bio mb-3 rounded-0">
                    <div class="card-body ">


                        <center class="mb-4">
                            <img src="/uploads/images/{{ proposal.seller.picture }}"
                                 width="130" class="rounded-circle">
                        </center>
                        <h3 class="text-center h3">
                            <a class="text-success" href="">
                                {{ proposal.seller.firstName }} </a> <span class="divider"> </span> <span
                                    class="text-muted">{% if proposal.seller.level is not null  %} {{ proposal.seller.level.name }} {% endif %}</span>
                        </h3>
                        <a href="../../conversations/message?seller_id=450"
                           class="btn btn-lg btn-block btn-success rounded-0">Contactez moi</a>
                        <hr>
                        <div class="row">
                            <div class="col-md-6">
                                <p class="text-muted"><i class="fa fa-check pr-1"></i> Pays</p>
                            </div>
                            <div class="col-md-6">
                                <p>{{ proposal.seller.pays }}</p>
                            </div>
                            <div class="col-md-6">
                                <p class="text-muted"><i class="fa fa-check pr-1"></i> Langues</p>
                            </div>
                            <div class="col-md-6">
                                <p>
                                    {% for langue in proposal.seller.languages %}
                                         <span>{{ langue.name }}</span>
                                    {% endfor %}
                                </p>
                            </div>
                            <div class="col-md-6">
                                <p class="text-muted"><i class="fa fa-check pr-1"></i>Commentaires Positifs</p>
                                <p class="text-muted"><i class="fa fa-check pr-1"></i>Dernière livraison</p>
                            </div>
                            <div class="col-md-6">
                                <p> 100% </p>
                                <p> none </p>
                            </div>
                        </div>
                        <hr>
                        <p class="text-left "></p>
                        <a href="../../Miguellima" class="text-success"> En savoir plus </a>
                    </div>

                </div>
                <div class="mb-5 text-center copyright-box "><!--- copyright-box Starts --->
                    <p class="mb-2 ">
                        Copyright © <a href="../../Miguellima" class="strike">{{ proposal.seller.fullName }}</a>. All Rights Reserved.
                    </p>

                </div><!--- copyright-box Ends --->  </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h2 class="mt-3">
                    Autres services proposés par <a href="" class="text-success">{{ proposal.seller.fullName }}</a></h2>
                <hr>
                <div class="row flex-wrap mb-2">
                    {% for otherProposal in proposal.seller.proposals %}
                        <div class="col-xl-2dot4 col-lg-3 col-md-4 col-sm-6 col-xs-12 mb-4">
                            <div class="proposal-card-base mp-proposal-card">
                                <!--- proposal-card-base mp-proposal-card Starts --->
                                <a href="{{ path('show_details_proposal',{sellerSlug: otherProposal.seller.slug, proposalSlug: otherProposal.slug }) }}">
                                    <img {% if otherProposal.proposalImages.first() %}src="{{ asset('/uploads/images/'~otherProposal.proposalImages.first().getFileName()) }}" {% endif %}
                                         class="img-fluid">
                                </a>
                                <div class="proposal-card-caption"><!--- proposal-card-caption Starts --->
                                    <div class="proposal-seller-info"><!--- gig-seller-info Starts --->
                                        <span class="fit-avatar s24">
			                                    <img src="{{ asset('/uploads/images/'~otherProposal.seller.picture) }}"
                                                     class="rounded-circle" width="32" height="32">
		</span>
                                        <div class="seller-info-wrapper">
                                            <a href="https://www.gigtodo.com/marki"
                                               class="seller-name">{{ otherProposal.seller.Fullname }}</a>
                                            <div class="gig-seller-tooltip">
                                                {% if proposal.seller.level is not null  %} {{ proposal.seller.level.name }} {% endif %}    </div>
                                        </div>
                                    </div><!--- gig-seller-info Ends --->
                                    <a href="{{ path('show_details_proposal',{sellerSlug: otherProposal.seller.slug, proposalSlug: otherProposal.slug }) }}"
                                       class="proposal-link-main js-proposal-card-imp-data">
                                        <h3>{{ otherProposal.title }}
                                        </h3>
                                    </a>
                                    <div class="rating-badges-container">
		<span class="proposal-rating">
		<svg class="fit-svg-icon full_star" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" width="15"
             height="15"><path
                    d="M1728 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 21-10.5 35.5t-30.5 14.5q-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z"></path></svg>
		<span>
		<strong>{{ otherProposal.rating }}</strong>
            ({{ otherProposal.views }})
		</span>
		</span>
                                    </div>
                                </div><!--- proposal-card-caption Ends --->
                                <footer class="proposal-card-footer"><!--- proposal-card-footer Starts --->
                                    <div class="proposal-fav">
                                        <a href="#" data-toggle="modal" data-target="#login-modal">
                                            <i class="fa fa-heart dil1" data-toggle="tooltip" data-placement="top"
                                               title="" data-original-title="Favorite"></i>
                                        </a>
                                    </div>
                                    <div class="proposal-price">
                                        <a><small>A PARTIR DE</small>{{ otherProposal.price }} €</a>
                                    </div>
                                </footer><!--- proposal-card-footer Ends --->
                            </div><!--- proposal-card-base mp-proposal-card Ends --->          </div>
                    {% endfor %}
                </div>

            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script src="//platform-api.sharethis.com/js/sharethis.js#property=5c812224d11c6a0011c485fd&product=inline-share-buttons"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            $(".proposal-slider .owl-carousel").owlCarousel({
                margin: 20,
                nav: !0,
                mouseDrag: !1,
                touchDrag: !1,
                responsive: {
                    0: {
                        items: 2
                    },
                    600: {
                        items: 4
                    },
                    900: {
                        items: 5
                    },
                    1e3: {
                        items: 6
                    }
                }
            });

            /// Proposal Slider Code Starts ///
            $(".proposal-slider .item").click(function () {
                var eq = $(this).data('position');
                $(".proposal-slider .item").removeClass("active");
                $(".carousel-item").removeClass("active");
                $(".carousel-item:eq(" + eq + ")").addClass("active");
                $(".proposal-slider .item:eq(" + eq + ")").addClass("active");
            });
            // Slide Track COde Starts

            $("#myCarousel").on('slide.bs.carousel', function (event) {
                var eq = event.to;
                $(".proposal-slider .item").removeClass("active");
                $(".proposal-slider .item:eq(" + eq + ")").addClass("active");
            });

            $(".carousel-item").mouseover(function () {
                $(this).find(".slide-fullscreen").css('opacity', 1);
            });

            $(".carousel-item").mouseleave(function () {
                $(this).find(".slide-fullscreen").css('opacity', 0);
            });

            $(".slide-fullscreen").click(function () {
                var action = $(this).data('action');
                var img = $('#image-modal .modal-body img');
                if (action == "img-1") {
                    img.attr("src", "https://www.gigtodo.com/proposals/proposal_files/wb_office_wall_111319_1588310174.png");
                } else if (action == "img-2") {
                    img.attr("src", "https://www.gigtodo.com/proposals/proposal_files/empty-image.png");
                } else if (action == "img-3") {
                    img.attr("src", "https://www.gigtodo.com/proposals/proposal_files/empty-image.png");
                } else if (action == "img-4") {
                    img.attr("src", "https://www.gigtodo.com/proposals/proposal_files/empty-image.png");
                }

                $("#image-modal").modal('show');

            });

            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                var newForm = e.target.getAttribute("formid"); // newly activated tab
                var prevForm = e.relatedTarget.getAttribute("formid"); // previous active tab
                $("select[form=" + prevForm + "]").attr('form', newForm);
                $("input[form=" + prevForm + "]").attr('form', newForm);
            })

            function changePrice(name, price, checked) {
                var value = $(name).first().text();
                console.log(value);
                var num = parseInt(value);
                var calc = num + price;
                if (checked) {
                    $(name).html(calc);
                } else {
                    $(name).html(num - price);
                }
            }

            $(".buyables li label input").click(function (event) {
                var id = $(this).data("packagenum");
                var price = parseInt($(this).parent().find(".price").text().replace(/\D/g, ''));
                changePrice('.total-price', price, this.checked);
            });


            $('#good').hide();
            $('#bad').hide();
            var form = "#checkoutForm";

            $(".order-now").click(function () {
                $('<input />').attr('type', 'hidden').attr('name', "add_order").attr('value', " ").appendTo(form);
                $(form).submit();
            });

            $(".add-to-cart").click(function () {
                $('<input />').attr('type', 'hidden').attr('name', "add_cart").attr('value', " ").appendTo(form);
                $(form).submit();
            });

            $(window).scroll(function () {
                var scrollTop = $(window).scrollTop();
                if (scrollTop > 0) {
                    $('.mp-gig-top-nav li.btns').removeClass("d-none");
                    $('.mp-gig-top-nav').css({position: 'fixed', zIndex: "100", top: "0px"});
                } else {
                    $('.mp-gig-top-nav li.btns').addClass("d-none");
                    $('.mp-gig-top-nav').css({position: 'sticky', zIndex: "10"});
                }
            });


            $('.increase').click(function () {
                var current = parseInt($('.quantity').text());
                var num = current + 1;
                var value = parseInt($('.total-price').first().text());
                $('.quantity').html(num);
                $('form input[name="proposal_qty"]').val(num);
            });

            $('.decrease').click(function () {
                var current = parseInt($('.quantity').text());
                if (current > 1) {
                    var num = current - 1;
                    var value = parseInt($('.total-price').first().text());
                    $('.quantity').html(num);
                    $('form input[name="proposal_qty"]').val(num);
                }
            });

            $('.all').click(function () {
                $("#dropdown-button").html("Most Recent");
                $(".all").attr('class', 'dropdown-item all active');
                $(".bad").attr('class', 'dropdown-item bad');
                $(".good").attr('class', 'dropdown-item good');
                $("#all").show();
                $("#good").hide();
                $("#bad").hide();
            });

            $('.good').click(function () {
                $("#dropdown-button").html("Positive Reviews");
                $(".all").attr('class', 'dropdown-item all');
                $(".bad").attr('class', 'dropdown-item bad');
                $(".good").attr('class', 'dropdown-item good active');
                $("#all").hide();
                $("#good").show();
                $("#bad").hide();
            });

            $('.bad').click(function () {
                $("#dropdown-button").html("Negative Reviews");
                $(".all").attr('class', 'dropdown-item all');
                $(".bad").attr('class', 'dropdown-item bad active');
                $(".good").attr('class', 'dropdown-item good');
                $("#all").hide();
                $("#good").hide();
                $("#bad").show();
            });
        });
    </script>


{% endblock %}